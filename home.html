<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Query Input</title>
  <style>
    :root {
      --bg:#f9fafb; 
      --card:#ffffff; 
      --text:#1f2937; 
      --muted:#6b7280; 
      --accent:#2563eb;
    }
    html,body { height:100%; }
    body {
      margin:0; 
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
      background: linear-gradient(135deg, #eef2ff, #f9fafb);
      color:var(--text); 
      display:grid; 
      grid-template-rows:auto 1fr;
    }
    header {
      background:var(--card);
      padding:14px 24px; 
      display:flex; 
      align-items:center; 
      justify-content:space-between;
      border-bottom:1px solid #e5e7eb;
      box-shadow:0 2px 6px rgba(0,0,0,0.04);
    }
    header h2 { margin:0; font-size:18px; font-weight:600; color:var(--accent);}
    nav ul { list-style:none; margin:0; padding:0; display:flex; gap:20px; }
    nav a { color:var(--text); text-decoration:none; font-weight:500; transition:color .2s; }
    nav a:hover { color:var(--accent); }
    .card {
      width:min(680px, 92vw); 
      margin:auto; 
      background:var(--card); 
      border:1px solid #e5e7eb;
      box-shadow:0 6px 20px rgba(0,0,0,0.06);
      border-radius:20px; 
      padding:28px;
    }
    h1 { margin:0 0 14px; font-size:clamp(1.2rem, 1rem + 2vw, 1.8rem); letter-spacing:0.2px; }
    p { margin:0 0 18px; color:var(--muted); }
    form { display:flex; gap:10px; align-items:center; }
    .field { position:relative; flex:1; }
    input[type="search"]{
      width:100%; 
      font-size:16px; 
      padding:14px 44px 14px 44px; 
      border-radius:14px; 
      border:1px solid #d1d5db;
      background:#f9fafb; 
      color:var(--text); 
      outline:none; 
      transition: border .2s, box-shadow .2s;
    }
    input[type="search"]:focus{
      border-color:var(--accent); 
      box-shadow:0 0 0 3px rgba(37,99,235,0.2);
    }
    .icon-left { 
      position:absolute; 
      top:50%; 
      left:12px; 
      transform:translateY(-50%); 
      pointer-events:none; 
      font-size:16px;
    }
    .clear { 
      background:none; 
      border:none; 
      color:var(--muted); 
      cursor:pointer; 
      position:absolute; 
      right:12px; 
      top:50%; 
      transform:translateY(-50%); 
      padding:6px; 
      display:none; 
      z-index:2;
    }
    .action-btn {
      width:42px;
      height:42px;
      border:none;
      border-radius:50%;
      background:linear-gradient(135deg, #3b82f6, #2563eb);
      color:#fff;
      font-size:18px;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 3px 8px rgba(59,130,246,0.3);
      transition: transform 0.15s, box-shadow 0.15s;
    }
    .action-btn:hover { transform:translateY(-2px); box-shadow:0 6px 12px rgba(59,130,246,0.35);}
    .action-btn:active { transform:scale(0.95);}
    .result {
      margin-top:18px; 
      padding:14px; 
      border-radius:12px; 
      background:#f3f4f6;
      border:1px solid #e5e7eb; 
      display:none;
    }
    code { background:#eef2ff; padding:2px 6px; border-radius:6px; }
    .tips { margin-top:10px; color:var(--muted); font-size:13px; }
    a { color:var(--accent); }
  </style>
</head>
<body>
  <header>
    <h2>My App</h2>
    <nav>
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Services</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main class="card" role="main">
    <h1>Enter your query</h1>
    <p>Submit a query.</p>

    <form role="search" id="queryForm">
      <div class="field">
        <span class="icon-left" aria-hidden="true">ðŸ”Ž</span>
        <input id="q" name="q" type="search" placeholder="e.g., retrieve best scholarships for CS undergrads" autocomplete="on" aria-label="Query" required />
        <button type="button" class="clear" id="clearBtn" aria-label="Clear input">âœ•</button>
      </div>
      <button type="submit" class="action-btn" aria-label="Submit query">ðŸš€</button>
    </form>

    <section id="result" class="result" aria-live="polite"></section>
    <div class="tips">Tip: You can enter a sentence or paragraph as your query.</div>
  </main>

<script>
(function(){
  const input = document.getElementById('q');
  const result = document.getElementById('result');
  const clearBtn = document.getElementById('clearBtn');
  const form = document.getElementById('queryForm');

  // Show/hide clear button
  input.addEventListener('input', () => {
    clearBtn.style.display = input.value ? 'block' : 'none';
  });

  // Clear input and result
  clearBtn.addEventListener('click', (e) => {
    e.preventDefault();
    input.value = '';
    clearBtn.style.display = 'none';
    result.style.display = 'none';
    input.focus();
  });

  // Handle form submit
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const val = input.value.trim();
    if (val) {
      // Send query to Python backend
      const response = await fetch("http://localhost:8000/process", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ query: val })
      });
      const data = await response.json();

      // Show backend response
      result.style.display = 'block';
      result.textContent = "Processed: " + data.output;
    }
  });
})();
</script>

</body>
</html>
